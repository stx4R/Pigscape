<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>돼탈출 🐷 | 마이페이지</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  a { color: inherit; text-decoration: none; }
  <style>
    @font-face {
    font-family: 'Paperlogy3';
    src: url('static/fonts/Paperlogy-3Light.ttf') format('truetype');
    font-weight: 300; font-style: normal;
    }
    @font-face {
      font-family: 'Paperlogy4';
      src: url('static/fonts/Paperlogy-4Regular.ttf') format('truetype');
      font-weight: 400; font-style: normal;
    }
    @font-face {
      font-family: 'Paperlogy5';
      src: url('static/fonts/Paperlogy-5Medium.ttf') format('truetype');
      font-weight: 500; font-style: normal;
    }

    :root{
      --nav:#d94a4a;         
      --brand-border:#f08080;
      --red-weak:#f8d7d7;    
      --red-soft:#ffcccc;    
      --red-back:#ffeaea;    
      --text:#222; --muted:#555;
      --gap: 48px;           
      --nav-h: 72px;         
    }
    *{box-sizing:border-box}
    html,body{
      margin:0; padding:0;
      font-family:'Paperlogy5', 'Paperlogy4', 'Paperlogy3', sans-serif;
      color:var(--text); background:#fff;
      overflow-x:hidden;
    }
    a{color:inherit;text-decoration:none}
    /* 상단 glb (home.html 동일) */
    .glb{
      position:fixed; top:0; left:0; width:100%;
      height:var(--nav-h);
      background:var(--nav);
      display:flex; align-items:center; gap:24px;
      padding:0 20px; z-index:1000;
      box-shadow:0 4px 10px rgba(0,0,0,.08);
    }
    /* 브랜드(좌측 "돼탈출 🐷" 박스) */
    .brand{
      display:flex; align-items:center; justify-content:center;
      height:56px; padding:0 18px;
      border:3px solid var(--brand-border);
      background:var(--red-weak);
      border-radius:14px;
      font-weight:700; font-size:22px;
      color:#000;                 /* 요구: 글자 검은색 */
      user-select:none; cursor:pointer;
      transition:transform .18s ease;
    }
    .brand .pig{ display:inline-block; margin-left:6px; transition:transform .12s ease; }
    .brand.pulse{ transform:scale(1.06); }

    /* 내비 링크 */
    .nav-links{ display:flex; align-items:center; gap:22px; margin-left:auto; }
    .nav-item{
      position:relative; color:#fff; font-weight:700; font-size:18px;
      padding:8px 6px; border-radius:8px; cursor:pointer;
      transition:transform .2s ease, opacity .2s ease;
    }
    .nav-item .mini{
      position:absolute; left:50%; top:100%;
      transform:translate(-50%, 8px);
      background:#fff; color:#333; white-space:nowrap;
      padding:8px 10px; border-radius:10px;
      box-shadow:0 6px 18px rgba(0,0,0,.15);
      font-size:13px; font-weight:400;
      opacity:0; pointer-events:none;
      transition:opacity .15s ease, transform .15s ease;
    }
    /* ✅ “아이템 위에서만” 애니메이션: 다른 아이템 흐림(0.3) & 현재 아이템 클로즈업 */
    .nav-links.dim .nav-item{ opacity:.3; transform:none; }
    .nav-links.dim .nav-item.active{ opacity:1; transform:scale(1.18); }
    .nav-links.dim .nav-item.active .mini{ opacity:1; transform:translate(-50%, 12px); }

    /* 본문 */
    main{
      margin-top:var(--nav-h);
      height:calc(100vh - var(--nav-h));
      display:flex; flex-direction:column;
      padding:20px;
      overflow:auto;
    }
    h1{ font-size:28px; font-weight:700; margin:10px 0 4px; }
    h2{ font-size:20px; font-weight:700; margin-bottom:10px; }
    .card{ background:#fff; border-radius:16px; box-shadow:0 4px 12px rgba(0,0,0,.1); padding:16px; margin-bottom:16px; }
    .chart-box{ height:260px; }
    .grid{ display:grid; gap:16px; }
    .grid-2{ grid-template-columns:2fr 1fr; }
    .grid-3{ grid-template-columns:repeat(3,1fr); }
    .stats{ display:flex; justify-content:space-between; margin:6px 0; font-size:14px; }
    .fact{ background:#fff; border-radius:12px; padding:10px; box-shadow:0 2px 6px rgba(0,0,0,.08); text-align:center; font-size:14px; }
    .badge{ display:inline-block; padding:4px 10px; border-radius:10px; font-weight:700; font-size:14px; }
    .yellow{ background:#fff9c4; }
    .green{ background:#c8e6c9; }
    .blue{ background:#bbdefb; }
    .purple{ background:#e1bee7; }
    .orange{ background:#ffe0b2; }
  </style>
</head>
<body>
  <!-- 상단 glb -->
  <nav class="glb" role="navigation" aria-label="주요 메뉴">
    <!-- 브랜드: 클릭 시 홈, 🐷 클릭 시 순차 확대 후 0.2초 뒤 원복 -->
    <div class="brand" id="brandBox" onclick="location.href='/'" title="홈으로">
      <span>돼탈출</span>
      <span class="pig" id="navPig">🐷</span>
    </div>

    <div class="nav-links" id="navLinks">
      <a class="nav-item" href="info_pigscape.html">
        돼탈출?
        <span class="mini">돼탈출 프로그램이란?</span>
      </a>
      <a class="nav-item" href="bmr_calculator.html">
        BMR 계산기
        <span class="mini">사용자 BMR와 분포도 안내</span>
      </a>
      <a class="nav-item" href="game_pigscape.html">
        돼지니어스
        <span class="mini">게임으로 배우는 다이어트 상식</span>
      </a>
      <a class="nav-item" href="info_user.html">
        내 페이지
        <span class="mini">맞춤형 개인 페이지</span>
      </a>
    </div>
  </nav>


  <main>
    <h1>유이준님의 페이지</h1>
    <p style="color:var(--muted); margin-bottom:16px;">당신의 건강한 변화를 확인해보세요</p>

    <!-- BMI 차트 -->
    <div class="card">
      <h2>BMI 변화 추이</h2>
      <div class="chart-box"><canvas id="bmiChart"></canvas></div>
    </div>

    <div class="grid grid-2">
      <!-- 건강 지표 -->
      <div class="card">
        <h2>건강 지표</h2>
        <div class="stats"><span>현재 BMI</span><span class="badge yellow">25.3</span></div>
        <div class="stats"><span>기초대사량</span><span class="badge green">1680 kcal/day</span></div>
        <div class="stats"><span>감량한 체중</span><span class="badge blue">8.2 kg</span></div>
        <div class="stats"><span>소모한 칼로리</span><span class="badge purple">28,640 kcal</span></div>
      </div>

      <!-- 돼지니어스 성과 -->
      <div class="card">
        <h2>돼지니어스 성과</h2>
        <div class="stats"><span>정답률</span><span class="badge orange">87%</span></div>
        <div class="stats"><span>총 정답 개수</span><span class="badge purple">156개</span></div>
        <p style="text-align:center; font-size:13px; color:var(--muted); margin-top:8px;">
          게임을 통해 다이어트 지식이 늘어나고 있어요! 🧠
        </p>
      </div>
    </div>

    <!-- 오늘의 목표 -->
    <div class="card" style="background:#f8d7d7; border:2px solid #f08080;">
      <h2>오늘의 목표</h2>
      <p>물 8잔 마시기, 30분 걷기, 돼지니어스 3문제 풀기</p>
      <div style="display:flex; gap:6px;">
        <div style="width:10px; height:10px; background:#388e3c; border-radius:50%;"></div>
        <div style="width:10px; height:10px; background:#388e3c; border-radius:50%;"></div>
        <div style="width:10px; height:10px; background:#ccc; border-radius:50%;"></div>
      </div>
      <p style="font-size:12px; margin-top:4px;">2/3 완료</p>
    </div>

    <!-- 최근 성과 -->
    <div class="card">
      <h2>최근 성과</h2>
      <div class="grid grid-3">
        <div class="fact">🏆<br>3kg 감량 달성<br><small>2024.05.15</small></div>
        <div class="fact">🎯<br>BMI 정상 범위 진입<br><small>2024.06.01</small></div>
        <div class="fact">🧠<br>돼지니어스 100문제 돌파<br><small>2024.06.10</small></div>
      </div>
    </div>
  </main>

  <script>
    // GLB 인터랙션
    const navLinks = document.getElementById('navLinks');
    const navItems = [...navLinks.querySelectorAll('.nav-item')];

    navItems.forEach(item=>{
      item.addEventListener('mouseenter', ()=>{
        navLinks.classList.add('dim');
        navItems.forEach(i=>i.classList.remove('active'));
        item.addEventListener('mouseleave', ()=>{}); // no-op to prevent duplicate
        item.classList.add('active');
      });
      item.addEventListener('mouseleave', ()=>{
        setTimeout(()=>{
          if(!navItems.some(i=>i.matches(':hover'))){
            navLinks.classList.remove('dim');
            navItems.forEach(i=>i.classList.remove('active'));
          }
        }, 20);
      });
    });

    /* ---------- 브랜드 🐷: 이모지 → 박스 순차 확대 후 0.2초 뒤 원복 ---------- */
    const brandBox = document.getElementById('brandBox');
    const navPig   = document.getElementById('navPig');
    navPig.addEventListener('click', (e)=>{
      e.stopPropagation(); // 브랜드 클릭 이동 방지
      navPig.style.transform = 'scale(2)';
      setTimeout(()=> brandBox.classList.add('pulse'), 80);
      setTimeout(()=>{
        navPig.style.transform = 'scale(1)';
        brandBox.classList.remove('pulse');
      }, 200); // 0.2초 뒤 복귀
    });

    // BMI 차트
    const ctx=document.getElementById('bmiChart').getContext('2d');
    new Chart(ctx,{
      type:'line',
      data:{
        labels:["1월","2월","3월","4월","5월","6월"],
        datasets:[{
          label:'BMI',
          data:[28.5,27.8,27.2,26.5,25.9,25.3],
          borderColor:'#d94a4a',
          backgroundColor:'rgba(217,74,74,0.2)',
          borderWidth:3,
          pointBackgroundColor:'#d94a4a',
          pointRadius:5,
          pointHoverRadius:7,
          tension:0.3
        }]
      },
      options:{
        responsive:true,
        maintainAspectRatio:false,
        plugins:{legend:{display:false}},
        scales:{
          x:{ticks:{color:'#555'},grid:{color:'#eee'}},
          y:{ticks:{color:'#555'},grid:{color:'#eee'}}
        }
      }
    });

  </script>
</body>
</html>
