<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>돼탈출 🐷 | 돼지니어스</title>
  <link rel="icon" href="static/favicon-16x16.png"/>

  <style>
    @font-face {
      font-family: 'Paperlogy3';
      src: url('static/fonts/Paperlogy-3Light.ttf') format('truetype');
      font-weight: 300; font-style: normal;
    }
    @font-face {
      font-family: 'Paperlogy4';
      src: url('static/fonts/Paperlogy-4Regular.ttf') format('truetype');
      font-weight: 400; font-style: normal;
    }
    @font-face {
      font-family: 'Paperlogy5';
      src: url('static/fonts/Paperlogy-5Medium.ttf') format('truetype');
      font-weight: 500; font-style: normal;
    }

    :root{
      --nav:#d94a4a;
      --brand-border:#f08080;
      --red-weak:#f8d7d7;
      --text:#222; --muted:#555;
      --nav-h:72px;
    }
    *{box-sizing:border-box}
    html,body{
      margin:0; padding:0;
      font-family:'Paperlogy5', 'Paperlogy4', 'Paperlogy3', sans-serif;
      color:var(--text); background:#fff;
      overflow-x:hidden;
    }
    a{color:inherit;text-decoration:none}

    /* 상단 GLB */
    .glb{
      position:fixed; top:0; left:0; width:100%;
      height:var(--nav-h);
      background:var(--nav);
      display:flex; align-items:center; gap:24px;
      padding:0 20px; z-index:1000;
      box-shadow:0 4px 10px rgba(0,0,0,.08);
    }
    .brand{
      display:flex; align-items:center; justify-content:center;
      height:56px; padding:0 18px;
      border:3px solid var(--brand-border);
      background:var(--red-weak);
      border-radius:14px;
      font-weight:700; font-size:22px;
      color:#000;
      user-select:none; cursor:pointer;
      transition:transform .18s ease;
    }
    .brand .pig{ margin-left:6px; transition:transform .12s ease; }
    .brand.pulse{ transform:scale(1.06); }

    .nav-links{ display:flex; align-items:center; gap:22px; margin-left:auto; }
    .nav-item{
      position:relative; color:#fff; font-weight:700; font-size:18px;
      padding:8px 6px; border-radius:8px; cursor:pointer;
      transition:transform .2s ease, opacity .2s ease;
    }
    .nav-item .mini{
      position:absolute; left:50%; top:100%;
      transform:translate(-50%, 8px);
      background:#fff; color:#333; white-space:nowrap;
      padding:8px 10px; border-radius:10px;
      box-shadow:0 6px 18px rgba(0,0,0,.15);
      font-size:13px; font-weight:400;
      opacity:0; pointer-events:none;
      transition:opacity .15s ease, transform .15s ease;
    }
    .nav-links.dim .nav-item{ opacity:.3; transform:none; }
    .nav-links.dim .nav-item.active{ opacity:1; transform:scale(1.18); }
    .nav-links.dim .nav-item.active .mini{ opacity:1; transform:translate(-50%, 12px); }

    /* 본문 */
    main{ margin-top:var(--nav-h); padding:30px; max-width:700px; margin-left:auto; margin-right:auto; text-align:center; }
    h1{ font-size:28px; font-weight:700; margin-bottom:20px; }
    .quiz-box{
      padding:20px; border:2px solid #eee; border-radius:12px;
      margin-bottom:20px;
    }
    .quiz-box h2{ font-size:22px; margin-bottom:16px; }
    .choice {
      display:flex; justify-content:space-between; align-items:center;
      padding:12px; margin:10px auto;
      border:2px solid #ccc; border-radius:8px;
      cursor:pointer; transition: all .2s;
      max-width:420px; font-size:17px;
    }
    .choice:hover{ background:#fafafa; transform:scale(1.02); }
    .choice.correct{ border-color:green; background:#e6f4ea; }
    .choice.wrong{ border-color:red; background:#fdecea; }
    .choice .mark {
      font-size:20px;
      width:24px; text-align:center;
    }
    .result-box{
      padding:24px; border:2px solid var(--brand-border);
      background:#f8d7d7; border-radius:14px;
      display:none; text-align:left;
    }
    .result-box h2{ margin-top:0; }
    .result-card {
      margin:14px 0; padding:14px;
      border-radius:10px;
      background:#fff;
      box-shadow:0 2px 6px rgba(0,0,0,.1);
    }
    .result-card.correct { border:2px solid #4caf50; }
    .result-card.wrong { border:2px solid #f44336; }

    .explanation{ font-size:15px; color:#444; margin:6px 0 12px; }
    .stats{ margin-top:16px; padding:12px; background:#fff; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
  </style>

  <script>
// 🚫 1. Disable right-click & text selection (copy/paste prevention)
document.addEventListener("contextmenu", e => e.preventDefault());
document.addEventListener("selectstart", e => e.preventDefault());
document.addEventListener("copy", e => e.preventDefault());
document.addEventListener("cut", e => e.preventDefault());
document.addEventListener("paste", e => e.preventDefault());

// 🚫 2. Disable DevTools shortcuts
document.addEventListener("keydown", e => {
  if (
    e.key === "F12" || // F12
    (e.ctrlKey && e.shiftKey && (e.key === "I" || e.key === "J")) || // Ctrl+Shift+I/J
    (e.ctrlKey && e.key.toLowerCase() === "u") // Ctrl+U
  ) {
    e.preventDefault();
    alert("🚫 Developer Mode is disabled!");
  }
});

// 🚨 3. Detect if DevTools is open (basic check)
(function() {
  const threshold = 160;
  setInterval(() => {
    if (
      window.outerWidth - window.innerWidth > threshold ||
      window.outerHeight - window.innerHeight > threshold
    ) {
      document.body.innerHTML = "<h1 style='text-align:center; color:red;'>🚨 Developer Tools Detected! 🚨</h1>";
    }
  }, 500);
})();
</script>

  
</head>
<body>
  <!-- 상단 GLB -->
  <nav class="glb" role="navigation" aria-label="주요 메뉴">
    <div class="brand" id="brandBox" onclick="location.href='index.html'" title="홈으로">
      <span>돼탈출</span>
      <span class="pig" id="navPig">🐷</span>
    </div>
    <div class="nav-links" id="navLinks">
      <a class="nav-item" href="info_pigscape.html">돼탈출?<span class="mini">돼탈출 프로그램이란?</span></a>
      <a class="nav-item" href="bmr_calculator.html">BMR 계산기<span class="mini">사용자 BMR와 분포도 안내</span></a>
      <a class="nav-item" href="game_pigscape.html">돼지니어스<span class="mini">게임으로 배우는 다이어트 상식</span></a>
      <a class="nav-item" href="info_user.html">내 페이지<span class="mini">맞춤형 개인 페이지</span></a>
    </div>
  </nav>

  <!-- 본문 -->
  <main>
    <h1>🐷 돼지니어스 퀴즈</h1>

    <div id="quizContainer"></div>
    <div class="result-box" id="resultBox"></div>
  </main>

  <script>
    // GLB 인터랙션
    const navLinks=document.getElementById('navLinks');
    const navItems=[...navLinks.querySelectorAll('.nav-item')];
    navItems.forEach(item=>{
      item.addEventListener('mouseenter', ()=>{
        navLinks.classList.add('dim');
        navItems.forEach(i=>i.classList.remove('active'));
        item.classList.add('active');
      });
      item.addEventListener('mouseleave', ()=>{
        setTimeout(()=>{
          if(!navItems.some(i=>i.matches(':hover'))){
            navLinks.classList.remove('dim');
            navItems.forEach(i=>i.classList.remove('active'));
          }
        },20);
      });
    });
    const brandBox=document.getElementById('brandBox');
    const navPig=document.getElementById('navPig');
    navPig.addEventListener('click', (e)=>{
      e.stopPropagation();
      navPig.style.transform='scale(2)';
      setTimeout(()=>brandBox.classList.add('pulse'),80);
      setTimeout(()=>{
        navPig.style.transform='scale(1)';
        brandBox.classList.remove('pulse');
      },200);
    });

    // 퀴즈 데이터
    const quizzes=[
      {
        q:"BMI가 25 이상이면 무엇으로 분류될까요?",
        choices:["정상","과체중 또는 비만","저체중"],
        answer:1,
        explanation:"BMI 25 이상은 과체중 또는 비만 범주에 들어갑니다."
      },
      {
        q:"기초대사량(BMR)에 영향을 주지 않는 요소는?",
        choices:["나이","성별","좋아하는 음식"],
        answer:2,
        explanation:"나이와 성별은 BMR에 영향을 주지만 좋아하는 음식은 직접적 영향을 주지 않습니다."
      },
      {
        q:"다이어트 시 가장 중요한 요소는?",
        choices:["규칙적인 식습관과 운동","단기간 굶기","영양제만 먹기"],
        answer:0,
        explanation:"꾸준한 식습관과 운동이 가장 효과적이고 건강한 다이어트 방법입니다."
      }
    ];

    let current=0, score=0;
    let answers=[]; 
    const container=document.getElementById("quizContainer");
    const resultBox=document.getElementById("resultBox");

    // 샘플 통계 (실제는 서버에서 집계 가능)
    const avgScore=2.1; 
    const questionStats=[0.78,0.65,0.82]; 

    function showQuiz(idx){
      if(idx>=quizzes.length){
        container.innerHTML="";
        resultBox.style.display="block";
        resultBox.innerHTML=`<h2>총 ${score}/${quizzes.length} 문제 정답! 🎉</h2>`;
        resultBox.innerHTML+=`
          <div class="stats">
            <p>사용자 평균 정답 수: ${avgScore.toFixed(1)} / ${quizzes.length}</p>
          </div>
        `;
          answers.forEach((a,i)=>{
            const q=quizzes[i];
            const isCorrect=a===q.answer;
            resultBox.innerHTML+=`
              <div class="result-card ${isCorrect?'correct':'wrong'}">
                <strong>Q${i+1}. ${q.q}</strong><br/>
                <span>${isCorrect?'✅ 정답':'❌ 오답'}</span>
                <div class="explanation">💡 ${q.explanation}</div>
                <div class="stats">정답률: ${(questionStats[i]*100).toFixed(0)}%</div>
              </div>
            `;
          });
        return;
      }
      const q=quizzes[idx];
      container.innerHTML=`
        <div class="quiz-box">
          <h2>${q.q}</h2>
          ${q.choices.map((c,i)=>`<div class="choice" data-idx="${i}">${c}<span class="mark"></span></div>`).join("")}
        </div>
      `;
      document.querySelectorAll(".choice").forEach(el=>{
        el.addEventListener("click",()=>{
          const sel=parseInt(el.dataset.idx);
          answers.push(sel);
          if(sel===q.answer){
            el.classList.add("correct");
            el.querySelector(".mark").textContent="✅";
            score++;
          }else{
            el.classList.add("wrong");
            el.querySelector(".mark").textContent="❌";
          }
          document.querySelectorAll(".choice").forEach(e=>e.style.pointerEvents="none");
          setTimeout(()=>{ current++; showQuiz(current); },1200);
        });
      });
    }

    showQuiz(current);
  </script>
</body>
</html>
